{"map":"{\"version\":3,\"file\":\"_jsonp.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/bin/_jsonp.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"var log = function () {\r\n    var arg = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        arg[_i] = arguments[_i];\r\n    }\r\n    try {\r\n        console.log.apply(console, arg);\r\n    }\r\n    catch (error) { }\r\n}, defaultOption = {\r\n    timeout: 5000,\r\n    data: {},\r\n    callback: 'jsoncallback',\r\n    success: function (data) {\r\n        log(data);\r\n    },\r\n    fail: function (err) {\r\n        log(err);\r\n    }\r\n}, \r\n// 将json数据格式化为url参数\r\nformatParams = function (data) {\r\n    var arr = [];\r\n    for (var key in data) {\r\n        arr.push(key + \"=\" + encodeURIComponent(data[key]));\r\n    }\r\n    ;\r\n    return arr.join('&');\r\n}, \r\n// \r\nheader = document.getElementsByTagName('head')[0], jsonp = function (option) {\r\n    option = option || {};\r\n    // 将默认参数传入到配置中\r\n    for (var i in defaultOption) {\r\n        var key = i, item = defaultOption[i];\r\n        if (option[key] === undefined) {\r\n            option[key] = item;\r\n        }\r\n        ;\r\n    }\r\n    ;\r\n    if (typeof option['url'] !== 'string') {\r\n        throw new Error('option.url 不合法');\r\n    }\r\n    ;\r\n    var script = document.createElement('script'), callbackName = (function () {\r\n        var num = (Math.random() + '').substr(2);\r\n        return \"ydEffectJsonp_\" + num;\r\n    })(), data = (function () {\r\n        var data = {};\r\n        for (var i in option.data) {\r\n            data[i] = option.data[i];\r\n        }\r\n        ;\r\n        data[option.callback] = callbackName;\r\n        data['_t'] = (Math.random() + '').substr(2);\r\n        return data;\r\n    })(), url = option.url + \"?\" + formatParams(data);\r\n    // 定义回调\r\n    window[callbackName] = function () {\r\n        var arg = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            arg[_i] = arguments[_i];\r\n        }\r\n        option.success.apply(option, arg);\r\n        header.removeChild(script);\r\n        clearTimeout(script['timer']);\r\n        window[callbackName] = null;\r\n    };\r\n    // 将脚本添加到页面\r\n    script.src = url;\r\n    script.type = 'text/javascript';\r\n    script.charset = 'utf-8';\r\n    header.appendChild(script);\r\n    // 请求超时\r\n    script['timer'] = setTimeout(function () {\r\n        option.fail(url + \" Request timed out!\");\r\n        header.removeChild(script);\r\n        window[callbackName] = null;\r\n    }, option.timeout);\r\n    // 请求错误\r\n    script.onerror = function (err) {\r\n        throw new Error(\"Request error\");\r\n    };\r\n};\r\nexport default jsonp;\r\n//# sourceMappingURL=_jsonp.js.map"}
